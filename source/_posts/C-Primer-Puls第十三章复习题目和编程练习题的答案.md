---

title: C-Primer-Puls第十三章复习题目和编程练习题的答案
date: 2020-03-09 08:14:00
tags: [答案,题目]
categories: C语言

---

本章内容为《C Primer Plus第六版》第十三章复习题和编程练习题的答案
## 复习题
### 第一题
1. 下面的程序有什么问题？
``` c
int main(void)
{
    int *fp;
    int k;
    fp = fopen("gelatin");
    for (k = 0; k < 30; k++)
        fputs(fp, "Nanette eats gelatin.");
    fclose("gelatin");
    return 0;
}
```


<!--more-->
----------

### 第二题
2. 下面的程序完成什么任务？（假设在命令行环境中运行）
``` c
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
int main(int argc, char *argv[])
{
    int ch;
    FILE *fp;
    if (argc < 2)
        exit(EXIT_FAILURE);
    if ((fp = fopen(argv[1], "r")) == NULL)
        exit(EXIT_FAILURE);
    while ((ch = getc(fp)) != EOF)
        if (isdigit(ch))
            putchar(ch);
    fclose(fp);
    return 0;
}
```

----------

### 第三题
3. 假设程序中有下列语句：

        #include <stdio.h>
        FILE *fp1, *fp2;
        char ch;
        fp1 = fopen("terky", "r");
        fp2 = fopen("jerky", "w");
        另外，假设成功打开了两个文件。补全下面函数调用中缺少的参数：
        a.ch = getc();
        b.fprintf(, "%c\n", );
        c.putc(, );
        d.fclose(); /* 关闭terky文件 */

----------

### 第四题
4. 编写一个程序，不接受任何命令行参数或接受一个命令行参数。如果有一个参数，将其解释为文件名；如果没有参数，使用标准输入（stdin）作 为输入。假设输入完全是浮点数。该程序要计算和报告输入数字的算术平均值。

----------

### 第五题
5. 编写一个程序，接受两个命令行参数。第1个参数是字符，第2个参数是文件名。要求该程序只打印文件中包含给定字符的那些行。注意C程序根据'\n'识别文件中的行。假设所有行都不超过256个字符，你可能会想到用fgets()。

----------

### 第六题
6. 二进制文件和文本文件有何区别？二进制流和文本流有何区别？

----------

### 第七题
7. 1
 a.分别用fprintf()和fwrite()储存8238201有何区别？
 b.分别用putc()和fwrite()储存字符S有何区别？

----------

### 第八题
8. 下面语句的区别是什么？
printf("Hello, %s\n", name);
fprintf(stdout, "Hello, %s\n", name);
fprintf(stderr, "Hello, %s\n", name);

----------

### 第九题
9. "a+"、"r+"和"w+"模式打开的文件都是可读写的。哪种模式更适合用 来更改文件中已有的内容？



----------

## 编程练习
### 第一题
1. 修改程序清单13.1中的程序，要求提示用户输入文件名，并读取用户输入的信息，不使用命令行参数。

----------

### 第二题
2. 编写一个文件拷贝程序，该程序通过命令行获取原始文件名和拷贝文件名。尽量使用标准I/O和二进制模式。

----------

### 第三题
3. 编写一个文件拷贝程序，提示用户输入文本文件名，并以该文件名作为原始文件名和输出文件名。该程序要使用 ctype.h 中的 toupper()函数，在 写入到输出文件时把所有文本转换成大写。使用标准I/O和文本模式。

----------

### 第四题
4. 编写一个程序，按顺序在屏幕上显示命令行中列出的所有文件。使用argc控制循环。

----------

### 第五题
5. 修改程序清单13.5中的程序，用命令行界面代替交互式界面。

----------

### 第六题
6. 使用命令行参数的程序依赖于用户的内存如何正确地使用它们。重写程序清单 13.2 中的程序，不使用命令行参数，而是提示用户输入所需信息。

----------

### 第七题
7. 编写一个程序打开两个文件。可以使用命令行参数或提示用户输入文件名。
a.该程序以这样的顺序打印：打印第1个文件的第1行，第2个文件的第1行，第1个文件的第2行，第2个文件的第2行，以此类推，打印到行数较多文 件的最后一行。
b.修改该程序，把行号相同的行打印成一行。

----------

### 第八题
8. 编写一个程序，以一个字符和任意文件名作为命令行参数。如果字符后面没有参数，该程序读取标准输入；否则，程序依次打开每个文件并报告 每个文件中该字符出现的次数。文件名和字符本身也要一同报告。程序应包 含错误检查，以确定参数数量是否正确和是否能打开文件。如果无法打开文件，程序应报告这一情况，然后继续处理下一个文件。

----------

### 第九题
9. 修改程序清单 13.3 中的程序，从 1 开始，根据加入列表的顺序为每个单词编号。当程序下次运行时，确保新的单词编号接着上次的编号开始。

----------

### 第十题
10. 编写一个程序打开一个文本文件，通过交互方式获得文件名。通过一个循环，提示用户输入一个文件位置。然后该程序打印从该位置开始到下 一个换行符之前的内容。用户输入负数或非数值字符可以结束输入循环。

----------

### 第十一题
11. 编写一个程序，接受两个命令行参数。第1个参数是一个字符串，第2个参数是一个文件名。然后该程序查找该文件，打印文件中包含该字符串的所有行。因为该任务是面向行而不是面向字符的，所以要使用fgets()而不 是getc()。使用标准C库函数strstr()（11.5.7节简要介绍过）在每一行中查找 指定字符串。假设文件中的所有行都不超过255个字符。

----------

### 第十二题
12. 创建一个文本文件，内含20行，每行30个整数。这些整数都在0～9之间，用空格分开。该文件是用数字表示一张图片，0～9表示逐渐增加的灰 度。编写一个程序，把文件中的内容读入一个20×30的int数组中。一种把这 些数字转换为图片的粗略方法是：该程序使用数组中的值初始化一个20×31 的字符数组，用值0 对应空格字符，1 对应点字符，以此类推。数字越大表示字符所占的空间越大。例如，用#表示9。每行的最后一个字符（第31个） 是空字符，这样该数组包含了20个字符串。最后，程序显示最终的图片 （即，打印所有的字符串），并将结果储存在文本文件中。例如，下面是开始的数据：

----------

### 第十三题
13. 用变长数组（VLA）代替标准数组，完成编程练习12。

----------

### 第十四题
14. 数字图像，尤其是从宇宙飞船发回的数字图像，可能会包含一些失真。为编程练习12添加消除失真的函数。该函数把每个值与它上下左右相邻的值作比较，如果该值与其周围相邻值的差都大于1，则用所有相邻值的平 均值（四舍五入为整数）代替该值。注意，与边界上的点相邻的点少于4 个，所以做特殊处理。